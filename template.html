<head>
  <title>Let's Learn Meteor!</title>
</head>

<body>
  {{> people}}
</body>

<template name="people">
  <h1>RSVPs</h1>
  <div class="login">{{loginButtons}}</div>

  <table class="sortby-{{sort}}">
    <thead>
      <tr>
        <th data-sortby="plusones">+1 {{{sortby 'plusones'}}}</th>
        <th data-sortby="name">Name {{{sortby 'name'}}}</th>
        <th data-sortby="guests">Guests {{{sortby 'guests'}}}</th>
        <th data-sortby="joindate">Signed up {{{sortby 'joindate'}}}</th>
      </tr>
    </thead>
    <tbody>
    {{#each people}}
      <tr style="{{bgc plusones}}" class="{{selected}}">
        <td class="plusones">
          {{#if currentUser}}
            {{#unless isMe}}
              <a href="#" class="button">+{{plusones}}</a>
            {{else}}
              +{{plusones}}
            {{/unless}}
          {{else}}
            +{{plusones}}
          {{/if}}
        </td>
        <th data-col="name">{{#if photo}}<img src="{{photo}}" alt="">{{/if}} {{name}}</th>
        <td data-col="guests">{{guests}}</td>
        <td>{{formatdate joindate}}</td>
      </tr>
      {{else}}
      <tr><td colspan="4">No one rsvp'd :(</td></tr>
    {{/each}}
    </tbody>
  </table>
</template>